{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{RNiq:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"__N_SSP\",(function(){return h}));var a=n(\"q1tI\"),c=n.n(a),i=n(\"/MKj\"),o=n(\"ODXe\"),r=n(\"Vl3Y\"),l=n(\"5rEg\"),u=n(\"2/Rp\"),s=n(\"p+NB\"),d=n(\"3zrx\"),f=c.a.createElement,p=function(){var t=Object(i.b)(),e=Object(d.a)(\"\"),n=Object(o.a)(e,3),c=n[0],p=n[1],m=n[2],b=Object(i.c)((function(t){return t.post})),g=b.imagePaths,h=b.addPostLoading,v=b.addPostDone,w=Object(a.useRef)(),E=Object(a.useCallback)((function(){w.current.click()}),[w.current]);Object(a.useEffect)((function(){v&&m(\"\")}),[v]);var O=Object(a.useCallback)((function(){if(!c||!c.trim())return alert(\"\\uac8c\\uc2dc\\uae00\\uc744 \\uc791\\uc131\\ud558\\uc138\\uc694.\");var e=new FormData;return g.forEach((function(t){e.append(\"image\",t)})),e.append(\"content\",c),t({type:s.e,data:e})}),[c,g]),j=Object(a.useCallback)((function(e){console.log(\"images\",e.target.files);var n=new FormData;[].forEach.call(e.target.files,(function(t){n.append(\"image\",t)})),t({type:s.G,data:n})})),y=Object(a.useCallback)((function(e){return function(){t({type:s.v,data:e})}}));return f(r.a,{style:{margin:\"10px 0 20px\"},encType:\"multipart/form-data\",onFinish:O},f(l.a.TextArea,{maxLength:140,placeholder:\"\\uc5b4\\ub5a4 \\uc2e0\\uae30\\ud55c \\uc77c\\uc774 \\uc788\\uc5c8\\ub098\\uc694?\",value:c,onChange:p}),f(\"div\",null,f(\"input\",{type:\"file\",name:\"image\",multiple:!0,hidden:!0,ref:w,onChange:j}),f(u.a,{onClick:E},\"\\uc774\\ubbf8\\uc9c0 \\uc5c5\\ub85c\\ub4dc\"),f(u.a,{type:\"primary\",style:{float:\"right\"},htmlType:\"submit\",loading:h},\"\\uc9f9\\uc9f9\")),f(\"div\",null,g.map((function(t,e){return f(\"div\",{key:t,style:{display:\"inline-block\"}},f(\"img\",{src:\"http://localhost:3065/\".concat(t),style:{width:\"200px\"},alt:t}),f(\"div\",null,f(u.a,{onClick:y(e)},\"\\uc81c\\uac70\")))}))))},m=n(\"kduo\"),b=n(\"1zst\"),g=c.a.createElement,h=!0;e.default=function(){var t=Object(i.b)(),e=Object(i.c)((function(t){return t.user})).me,n=Object(i.c)((function(t){return t.post})),c=n.mainPosts,o=n.hasMorePosts,r=n.loadPostsLoading,l=n.retweetError;return Object(a.useEffect)((function(){l&&alert(l)}),[l]),Object(a.useEffect)((function(){function e(){if(window.pageYOffset+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&o&&!r){var e,n=null===(e=c[c.length-1])||void 0===e?void 0:e.id;t({type:s.n,lastId:n})}}return window.addEventListener(\"scroll\",e),function(){window.removeEventListener(\"scroll\",e)}}),[o,r,c]),g(b.a,null,e&&g(p,null),c.map((function(t){return g(m.a,{key:t.id,post:t})})))}},vlRD:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"RNiq\")}])}},[[\"vlRD\",1,2,6,8,0,3,4,5,7,9]]]);","extractedComments":[]}